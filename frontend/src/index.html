<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¸å®‰è‡ªåŠ¨äº¤æ˜“ç³»ç»Ÿ v3.0</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.prod.js"></script>
</head>
<body>
<div id="app">
    <aside class="sidebar">
        <div class="sidebar-header"><div class="logo"><span class="logo-icon">ğŸ“ˆ</span><span class="logo-text">äº¤æ˜“ç³»ç»Ÿ v3</span></div></div>
        <nav class="sidebar-nav">
            <a v-for="item in menuItems" :key="item.id" :class="{ active: currentView === item.id }" @click="currentView = item.id">
                <span class="nav-icon">{{ item.icon }}</span><span class="nav-text">{{ item.name }}</span>
            </a>
        </nav>
    </aside>
    <main class="main-content">
        <header class="top-bar">
            <h1>{{ currentViewTitle }}</h1>
            <div class="top-actions">
                <div class="balance-info"><span class="balance-label">è´¦æˆ·ä½™é¢</span><span class="balance-value">{{ formatBalance(accountBalance) }} USDT</span></div>
                <button class="btn btn-primary" @click="refreshData">ğŸ”„ åˆ·æ–°</button>
            </div>
        </header>
        <div class="content-area">
            <div v-if="currentView === 'dashboard'" class="view-dashboard">
                <div class="stats-grid">
                    <div class="stat-card"><div class="stat-icon">ğŸ’°</div><div class="stat-content"><div class="stat-value">{{ formatBalance(accountBalance) }}</div><div class="stat-label">è´¦æˆ·ä½™é¢</div></div></div>
                    <div class="stat-card"><div class="stat-icon">ğŸ“Š</div><div class="stat-content"><div class="stat-value">{{ dailyPnL >= 0 ? '+' : '' }}{{ formatBalance(dailyPnL) }}</div><div class="stat-label">ä»Šæ—¥ç›ˆäº</div></div></div>
                    <div class="stat-card"><div class="stat-icon">ğŸ“ˆ</div><div class="stat-content"><div class="stat-value">{{ winRate }}%</div><div class="stat-label">èƒœç‡</div></div></div>
                    <div class="stat-card"><div class="stat-icon">ğŸ“‰</div><div class="stat-content"><div class="stat-value">{{ maxDrawdown }}%</div><div class="stat-label">æœ€å¤§å›æ’¤</div></div></div>
                </div>
            </div>
            <div v-if="currentView === 'strategy'" class="view-strategy">
                <div class="strategy-toolbar"><button class="btn btn-primary">â• æ·»åŠ ç­–ç•¥</button><button class="btn" @click="loadStrategies">ğŸ”„ åˆ·æ–°</button></div>
                <div class="strategy-grid">
                    <div v-for="s in strategies" :key="s.name" class="strategy-card">
                        <div class="strategy-header"><h3>{{ s.name }}</h3><span class="status-badge" :class="s.enabled ? 'enabled' : 'disabled'">{{ s.enabled ? 'å·²å¯ç”¨' : 'å·²ç¦ç”¨' }}</span></div>
                        <div class="strategy-body"><p>{{ s.description }}</p></div>
                        <div class="strategy-footer"><button class="btn btn-sm" :class="s.enabled ? 'btn-warning' : 'btn-success'" @click="toggleStrategy(s.name)">{{ s.enabled ? 'ç¦ç”¨' : 'å¯ç”¨' }}</button></div>
                    </div>
                </div>
            </div>
            <div v-if="currentView === 'backtest'" class="view-backtest">
                <div class="backtest-layout">
                    <div class="backtest-config">
                        <div class="config-card">
                            <h3>å›æµ‹é…ç½®</h3>
                            <div class="form-group"><label>ç­–ç•¥</label><select v-model="backtestConfig.strategy"><option v-for="s in strategies" :key="s.name" :value="s.name">{{ s.name }}</option></select></div>
                            <div class="form-group"><label>äº¤æ˜“å¯¹</label><select v-model="backtestConfig.symbol"><option value="BTCUSDT">BTC/USDT</option><option value="ETHUSDT">ETH/USDT</option></select></div>
                            <div class="form-group"><label>åˆå§‹èµ„é‡‘</label><input type="number" v-model="backtestConfig.initialCapital"></div>
                            <button class="btn btn-primary btn-block" @click="runBacktest" :disabled="backtestRunning">{{ backtestRunning ? 'å›æµ‹ä¸­...' : 'å¼€å§‹å›æµ‹' }}</button>
                        </div>
                    </div>
                    <div class="backtest-results">
                        <div v-if="backtestResult" class="results-container">
                            <div class="performance-overview">
                                <div class="perf-card" :class="backtestResult.totalReturn >= 0 ? 'profit' : 'loss'"><div class="perf-value">{{ backtestResult.totalReturn.toFixed(2) }}%</div><div class="perf-label">æ€»æ”¶ç›Š</div></div>
                                <div class="perf-card"><div class="perf-value">{{ backtestResult.annualReturn.toFixed(2) }}%</div><div class="perf-label">å¹´åŒ–</div></div>
                                <div class="perf-card"><div class="perf-value">{{ backtestResult.maxDrawdown.toFixed(2) }}%</div><div class="perf-label">å›æ’¤</div></div>
                                <div class="perf-card"><div class="perf-value">{{ backtestResult.sharpeRatio.toFixed(2) }}</div><div class="perf-label">å¤æ™®</div></div>
                                <div class="perf-card"><div class="perf-value">{{ backtestResult.winRate.toFixed(2) }}%</div><div class="perf-label">èƒœç‡</div></div>
                                <div class="perf-card"><div class="perf-value">{{ backtestResult.profitFactor.toFixed(2) }}</div><div class="perf-label">ç›ˆäºæ¯”</div></div>
                            </div>
                        </div>
                        <div v-else class="empty-state"><div class="empty-icon">ğŸ“Š</div><p>é…ç½®å‚æ•°åç‚¹å‡»"å¼€å§‹å›æµ‹"</p></div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>
<script src="js/config.js"></script>
<script src="js/api.js"></script>
<script src="js/app.js"></script>
</body>
</html>
